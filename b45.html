<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<!--ğŸ’ æ„Ÿè°¢NAGEKI-NETä¸mikobot~ ğŸ’
ğŸ’ without love by Eternal973~ ğŸ’-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nageki-Net b45</title>
</head>
<body>
    <input type="text" id="aimeIdInput" placeholder="è¯·è¾“å…¥å¥½å‹å·">
    <button onclick="fetchPng()">æŸ¥è¯¢b45</button>
    <button onclick="getAimeId()">è·å–å¥½å‹å·</button><br>
    <input type="checkbox" name="chkBoxRem" id="chkBoxRem" onclick="checkBoxOnClick();"/> <label for="chkBoxRem">ä¸‹æ¬¡è®¿é—®æ—¶è‡ªåŠ¨å¡«å……å¥½å‹å·</label><br><br>
    <img id="b45Image" alt="b45Image" style="filter: drop-shadow(rgb(249,254,184) 0px 0px 5px); border-radius: 20px;">

    <script>
        function fetchPng() {
            const aimeId = document.getElementById('aimeIdInput').value;
            if (!aimeId) {
                alert('è¯·è¾“å…¥å¥½å‹å·ï¼');
                return;
            }
            fetch(`https://tencent.mikobot.moe/nageki/query/img?userId=${aimeId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.base64 && data.userId) {
                        const imageSrc = `data:image/png;base64,${data.base64}`;
                        document.getElementById('b45Image').src = imageSrc;
                    } else {
                        alert('è·å–æ•°æ®å¤±è´¥ï¼');
                    }
                })
                .catch(error => {
                    console.error('è¯·æ±‚é”™è¯¯ï¼š', error);
                    alert('è¯·æ±‚å‡ºé”™ï¼Œè¯·ç¨åé‡è¯•ï¼');
                });
        }
        function getAimeId(){
            alert('ç‚¹å‡»ç¡®å®šè¿›å…¥Nageki-Netï¼Œé€‰æ‹©Rival ListæŸ¥çœ‹å¥½å‹å·')
            window.open('https://ongeki.moe/web/ongeki/rival');
        }
        function SetCookie(sName, sValue,iExpireDays){
            if (iExpireDays){
            var dExpire = new Date();
            dExpire.setTime(dExpire.getTime()+parseInt(iExpireDays*24*60*60*1000));
            document.cookie = sName + "=" + escape(sValue) + "; expires=" + dExpire.toGMTString();
            }else{
            document.cookie = sName + "=" + escape(sValue);
            }
            }
        function GetCookie(sName){
            var arr = document.cookie.match(new RegExp("(^| )"+sName+"=([^;]*)(;|$)"));
            if(arr !=null){return unescape(arr[2])};
            return null;
            }
        function pushFormInfo(){
            if(GetCookie("remembered")==="true"){
            document.getElementById("aimeIdInput").value=GetCookie("aimeId");
            document.getElementById("chkBoxRem").checked=(bolRemembered==="true");
            }
            }
        function checkBoxOnClick(){
            if(document.getElementById("chkBoxRem").checked==true) {
            SetCookie("aimeId",document.getElementById("aimeIdInput").value,365);
            SetCookie("remembered",document.getElementById("chkBoxRem").checked,365);
            }else{
            SetCookie("aimeId","");
            SetCookie("remembered",false);
            }
            }
    </script>
    <script language="JavaScript" type="text/javascript">pushFormInfo();</script>
</body>
</html>
